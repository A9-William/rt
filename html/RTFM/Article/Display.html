<& /RTFM/Article/Elements/Tabs, id => $id, Title => $title &>
  <& /Elements/TitleBoxStart, title => loc('The Basics'), title_class=> 'inverse',  color => "#993333" &>
<table width="100%">
<tr>
<td>Summary</td>
<td><%$article->Summary%></td>
</tr>
</table>
<& /Elements/TitleBoxEnd &> 
<br>
  <& /Elements/TitleBoxStart, title => loc('Custom Fields'), title_class=> 'inverse',  color => "#993333" &>
<table width="100%">
% while (my $cf = $cfs->Next) {
% my $values = $article->CustomFieldValues($cf->Id);
<tr>
<td valign=top><b><%$cf->Name%></b></td>
<td>
<% ($cf->Type !~ /Single$/) && '<ul>' |n%>
%   while (my $value = $values->Next) {
%       my $content;
%       if ( $value) {$content = $value->Content};
%       if ($cf->Type =~ /^(FreeForm|Text)/) {
%           $content = "<pre>".$content."</pre>" unless ($content =~ /<(.{1,5})>/);
%       }
<%($cf->Type !~ /Single$/) && '<li>'|n%>
<%$content|n%>
% }
<%($cf->Type !~ /Single$/ )&& '</ul>'|n%>
% }
</td>
</tr>
</table>
<& /Elements/TitleBoxEnd &> 
<br>

    <& /Elements/TitleBoxStart, title => loc('Links'), title_class=> 'inverse',  titleright => '', color=> "#336633" &> 
    <table width="100%">
    <tr>
    <td valign="top">

<&|/l&>Refers to</&>:<BR>
<UL>
% my $refersto = $article->RefersTo;

% while (my $link = $refersto->Next) {
% my $member = $link->TargetURI;
<LI>
% if ($link->TargetURI->IsLocal) {

<a href="<%$member->Resolver->HREF%>"><%$member->Object->Id%></a>: 
% if (UNIVERSAL::can($member->Object, 'Name')) {
<%$member->Object->Name%>
% } elsif (UNIVERSAL::can($member->Object, 'Subject')) {
<%$member->Object->Subject%>
% }
</a>
% } else {
<A HREF="<%$member->Resolver->HREF%>"><%$link->Target%></A>
% }
%}
</UL>
</td>
<td valign="top">
<&|/l&>Referred to by</&>:<BR>
<UL>
% my $referredtoby = $article->ReferredToBy;
% while (my $link = $referredtoby->Next) {
% my $member = $link->BaseURI;
<LI>
% if ($member->URI->IsLocal) {
<a href="<%$member->Resolver->HREF%>"><%$member->Object->Id%></a>: 
% if (UNIVERSAL::can($member->Object, 'Name')) {
<%$member->Object->Name%>
% } elsif (UNIVERSAL::can($member->Object, 'Subject')) {
<%$member->Object->Subject%>
% }
</a>
% } else {
<A HREF="<%$member->Resolver->HREF%>"><%$link->Base%></A>
%}
% }
</UL>
</tr>
</table>

<& /Elements/TitleBoxEnd &>
<%init>

my $article = RT::FM::Article->new($session{'CurrentUser'}); 

$article->Load($id);
unless ($article->Id) {
    $m->comp("/RTFM/Elements/Error", Why => loc("Article not found"));
}

unless ($session{'CurrentUser'}->HasRight( Object => $article->ClassObj, 
                                           Right => 'ShowArticle')) {
    $m->comp("/RTFM/Elements/Error", Why => loc("Permission Denied"));
}

my $cfs = $article->ClassObj->CustomFields;


   my $title =  loc( "Article #[_1]: [_2]", $article->Id, $article->Name);
</%init>

<%args>
$id => undef
</%args>
