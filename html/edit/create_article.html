%# BEGIN LICENSE BLOCK
%# 
%#  Copyright (c) 2002 Jesse Vincent <jesse@bestpractical.com>
%#  
%#  This program is free software; you can redistribute it and/or modify
%#  it under the terms of version 2 of the GNU General Public License 
%#  as published by the Free Software Foundation.
%# 
%#  A copy of that license should have arrived with this
%#  software, but in any event can be snarfed from www.gnu.org.
%# 
%#  This program is distributed in the hope that it will be useful,
%#  but WITHOUT ANY WARRANTY; without even the implied warranty of
%#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
%#  GNU General Public License for more details.
%# 
%# END LICENSE BLOCK

<& /Elements/Header, Title => 'Create a new article' &>
<& /Elements/NavBar &>
<form method="post" action="../article.html" enctype="form/multipart">
<input type=hidden name="id" value="new">
<HR>
<BR>
Summary: <input size=70 name="Summary"><BR>
Parent: <& /Elements/ArticleSelect, Name => "Parent", Default => $ParentObj->Id &><BR>
<textarea cols=70 rows=20 name="Content"></textarea>
<br>
<input type=submit>
</form>
</body>
</html>

<%INIT>
my $ParentObj = new RT::FM::Article ($session{'CurrentUser'});
$ParentObj->Load($Parent);

unless (($Parent == 0 ) or ($ParentObj->Id)) {
	Abort ("$Parent isn't a valid article id. can't create an orphan!");
}

</%INIT>
<%ARGS>
$id => 0
$Parent => undef
</%ARGS>
