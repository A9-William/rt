<& /Admin/Elements/Header, Title => loc("Admin queues") &>
<& /Admin/Elements/Tabs, current_tab => 'Admin/Queues/' &>


<& /Elements/TitleBoxStart, title => loc("Select a queue") &>

% if ($session{'CurrentUser'}->HasSystemRight('AdminQueue')) {
<P><A HREF="<%$RT::WebPath%>/Admin/Queues/Modify.html?Create=1"><&|/l&>Create a new queue</&></A><BR><BR></P>
% }

<TABLE>
<TR>
<TD VALIGN=TOP>

<FORM METHOD=POST ACTION="<% $RT::WebPath %>/Admin/Queues/">

<input type="checkbox" name="FindDisabledQueues"> <&|/l&>Include disabled queues in listing.</&>
<BR>
<div align=right><input type=submit value="<&|/l&>Go!</&>"></div> 
</FORM>
</TD>
</TR>
<TR>
<TD>
<%$caption%>:<BR>
<UL>
%if ($queues->Count == 0) {
<LI> <i><&|/l&>No queues matching search criteria found.</&></i>
% }
%while ( $queue = $queues->Next) {
<LI><A HREF="Modify.html?id=<%$queue->id%>"><%$queue->Name%></a></LI>
%}

</UL>
</TD>
</TR>
</TABLE>
<& /Elements/TitleBoxEnd &>

<%INIT>
my ($queue, $caption);
my $queues = new RT::Queues($session{'CurrentUser'});
$queues->UnLimit();

if ($FindDisabledQueues) {
        $caption = loc("All Queues");
        $queues->{'find_disabled_rows'} = 1;
} else {
    $caption = loc("Enabled Queues");
}

</%INIT>
<%ARGS>
$FindDisabledQueues => 0
</%ARGS>
