<& /NoAuth/RTFM/Elements/ArticleTabs, id => $id, Title => $title, current_toptab =>
'NoAuth/RTFM/index.html', current_tab => 'NoAuth/RTFM/Search.html', current_subtab => 'NoAuth/RTFM/Display.html?id='.$article->Id &>
<emp><%$article->Summary%></emp>

<table>
% while (my $cf = $cfs->Next) {
% my $values = $article->CustomFieldValues($cf->Id);
<tr>
<td valign=top><b><%$cf->Name%></b></td>
<td>
<% ($cf->Type !~ /Single$/) && '<ul>' |n%>
%   while (my $value = $values->Next) {
%       my $content;
%       if ( $value) {$content = $value->Content};
%       if ($cf->Type =~ /^(FreeForm|Text)/) {
%           $content = "<pre>".$content."</pre>" unless ($content =~ /<(.{1,5})>/);
%       }
<%($cf->Type !~ /Single$/) && '<li>'|n%>
<%$content|n%>
% }
<%($cf->Type !~ /Single$/ )&& '</ul>'|n%>
% }
</td>
</tr>
</table>
<%init>


my $article = RT::FM::Article->new($session{'CurrentUser'}); 

$article->Load($id);
unless ($article->Id) {
    $m->comp("/NoAuth/RTFM/Elements/Error", Why => loc("Article not found"));
}

unless ($session{'CurrentUser'}->HasRight( Object => $article->ClassObj, 
                                           Right => 'ShowArticle')) {
    $m->comp("/RTFM/Elements/Error", Why => loc("Permission Denied"));
}

my $cfs = $article->ClassObj->CustomFields;


   my $title =  loc( "Article #[_1]: [_2]", $article->Id, $article->Name);
</%init>

<%args>
$id => undef
</%args>
