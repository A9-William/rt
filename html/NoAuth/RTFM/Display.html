%# BEGIN LICENSE BLOCK
%# 
%#  Copyright (c) 2002-2003 Jesse Vincent <jesse@bestpractical.com>
%#  
%#  This program is free software; you can redistribute it and/or modify
%#  it under the terms of version 2 of the GNU General Public License 
%#  as published by the Free Software Foundation.
%# 
%#  A copy of that license should have arrived with this
%#  software, but in any event can be snarfed from www.gnu.org.
%# 
%#  This program is distributed in the hope that it will be useful,
%#  but WITHOUT ANY WARRANTY; without even the implied warranty of
%#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
%#  GNU General Public License for more details.
%# 
%# END LICENSE BLOCK

<& /NoAuth/RTFM/Elements/ArticleTabs, id => $id, Title => $title, current_toptab =>
'NoAuth/RTFM/index.html', current_tab => 'NoAuth/RTFM/Search.html', current_subtab => 'NoAuth/RTFM/Display.html?id='.$article->Id &>
<emp><%$article->Summary%></emp>
<br><br><br>
  <& /Elements/TitleBoxStart, title => loc('Custom Fields'), title_class=> 'inverse',  color => "#993333" &>
  <& /RTFM/Article/Elements/ShowCustomFields, article => $article &>
<& /Elements/TitleBoxEnd &> 
<br>
    <& /Elements/TitleBoxStart, title => loc('Links'), title_class=> 'inverse',  titleright => '', color=> "#336633" &> 
<& /RTFM/Article/Elements/ShowLinks, article => $article &>
<& /Elements/TitleBoxEnd &>
<%init>

my $article = RT::FM::Article->new($session{'CurrentUser'}); 

$article->Load($id);
unless ($article->Id) {
    $m->comp("/NoAuth/RTFM/Elements/Error", Why => loc("Article not found"));
}

unless ($session{'CurrentUser'}->HasRight( Object => $article->ClassObj, 
                                           Right => 'ShowArticle')) {
    $m->comp("/RTFM/Elements/Error", Why => loc("Permission Denied"));
}

my $cfs = $article->ClassObj->CustomFields;


   my $title =  loc( "Article #[_1]: [_2]", $article->Id, $article->Name);
</%init>

<%args>
$id => undef
</%args>
