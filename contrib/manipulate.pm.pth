Index: manipulate.pm
===================================================================
RCS file: /CVSROOT/yahoo/audit/rt/ui/web/manipulate.pm,v
retrieving revision 1.1
retrieving revision 1.5
diff -u -r1.1 -r1.5
--- manipulate.pm	1998/07/11 03:24:59	1.1
+++ manipulate.pm	1998/07/16 04:01:37	1.5
@@ -289,8 +289,15 @@
       else { 
 	$due_date=0;
       }
-      ($serial_num,$transaction_num,$StatusMsg)=&rt::add_new_request($rt::ui::web::FORM{'queue_id'},$rt::ui::web::FORM{'area'},$rt::ui::web::FORM{'requestors'},$rt::ui::web::FORM{'alias'},$rt::ui::web::FORM{'owner'},$rt::ui::web::FORM{'subject'},"$rt::ui::web::FORM{'final_prio_tens'}$rt::ui::web::FORM{'final_prio_ones'}","$rt::ui::web::FORM{'prio_tens'}$rt::ui::web::FORM{'prio_ones'}",$rt::ui::web::FORM{'status'},$rt::time,0,$date_due, $rt::ui::web::FORM{'content'},$current_user); 
-      &rt::req_in($serial_num,$current_user);
+      ($serial_num,$transaction_num,$StatusMsg)=&rt::add_new_request($rt::ui::web::FORM{'queue_id'},$rt::ui::web::FORM{'area'},$rt::ui::web::FORM{'requestors'},$rt::ui::web::FORM{'alias'},$rt::ui::web::FORM{'owner'},$rt::ui::web::FORM{'subject'},"$rt::ui::web::FORM{'final_prio_tens'}$rt::ui::web::FORM{'final_prio_ones'}","$rt::ui::web::FORM{'prio_tens'}$rt::ui::web::FORM{'prio_ones'}",$rt::ui::web::FORM{'q_status'},$rt::time,0,$date_due, $rt::ui::web::FORM{'content'},$current_user); 
+	if( ! $serial_num && ! $transaction_num )
+	{
+		$rt::ui::web::FORM{'display'} = '';
+	}
+	else
+	{
+	      &rt::req_in($serial_num,$current_user);
+	}
     }
     if ($current_user) {
       if ($rt::ui::web::FORM{'do_req_prio'}){
@@ -337,6 +344,7 @@
       }
       if ($rt::ui::web::FORM{'do_req_merge'}) {
 	($trans, $StatusMsg)=&rt::merge($serial_num,$rt::ui::web::FORM{'req_merge_into'},$current_user);
+	$serial_num = $rt::ui::web::FORM{'req_merge_into'} if $trans;
       }
       
       if ($rt::ui::web::FORM{'do_req_kill'}){
@@ -836,7 +845,9 @@
 sub display_summary {
   my ($in_serial_num)=@_;
   my ($bg_color, $fg_color);
-  
+
+my @logins = split(/,/,$rt::req[$in_serial_num]{'requestors'});
+my $isweb_uinfo = "<a href=\"<put your company's phone directory URL here";
   
   use Time::Local;
   
@@ -911,8 +922,16 @@
 <a href=\"$ScriptURL?display=SetUser&amp;serial_num=$in_serial_num\" $target>
 <b>Requestors</b></a>
 </TD>
-<TD BGCOLOR=\"$bg_color\">
-$rt::req[$in_serial_num]{'requestors'}
+<TD BGCOLOR=\"$bg_color\">";
+my $ln = '';
+for( @logins )
+{
+	s/\s//g;
+	($login,$dom) = split /\@/;
+	$ln .= "$isweb_uinfo$login\">$_,";
+}
+chop($ln);
+print "$ln
 </TD>
 </TR> 
 <TR VALIGN=\"TOP\">
