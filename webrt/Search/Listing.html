%# $Header$
%# Copyright 1996-2000 Jesse Vincent <jesse@fsck.com>

<& /Elements/Header, Title => "Ticket Listing / Queue View" &>

%#<& QueueInterpretRestrictionCookies &>
<TABLE WIDTH=100% border=0 cellpadding=1>
%#<& QueueHeader format="$format" &>
<TR>
%foreach (@{Config(\%ARGS, 'QueueListingCols')}) {
   <TH><% $_->{Header} %></TH>
%}
</TR>

<%PERL>
my $cnt=0;
while (my $Ticket = $session{'tickets'}->Next) {
 my $bgcolor;
 $cnt++; 
 if (($cnt % 2) == 1) {
	$bgcolor = "#cccccc";
 }
 else {
 	$bgcolor = "#ffffff";
 }
</%PERL>
<TR bgcolor="<%$bgcolor%>" >

%# The ticket view is controlled by config.pm, WebOptions

%foreach (@{Config(\%ARGS, 'QueueListingCols')}) {
	<TD>
	<& TicketCell , Ticket=>$Ticket,  Column=>$_ &>
	</TD>
%}
</TR>
%}
</TABLE>
%#<& QueueFooter format="$format" &>

<HR>

<& PickRestriction &>

<%INIT>

require RT::Interface::Web;

&ProcessSearchQuery(ARGS=>\%ARGS);

#$foo =$session{'tickets'}->Restrictions;

</%INIT>
