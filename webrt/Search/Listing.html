%# $Header$
%# Copyright 1996-2000 Jesse Vincent <jesse@fsck.com>

<& /Elements/Header, Title => "Ticket Listing / Queue View" &>

%#TODO: What's this? :)
%#Foo<% $foo %>bar

%#<& QueueInterpretRestrictionCookies &>
<TABLE WIDTH=100% border>
%#<& QueueHeader format="$format" &>
<TR>
%foreach (@{Config(\%ARGS, 'QueueListingCols')}) {
   <TH><% $_->{Header} %></TH>
%}
</TR>

%my $cnt=0;
%while (my $Ticket = $session{'tickets'}->Next) {
%## This doesn't work very well in Netscape:
%#<TR <% (($cnt++) % 2 == 1) && "class=\"oddline\"" %>>
<TR <% (($cnt++) % 2 == 1) && "bgcolor=\"eeeeee\"" %>>

%# The ticket view is controlled by config.pm, WebOptions

%foreach (@{Config(\%ARGS, 'QueueListingCols')}) {
	<TD>
	<& TicketCell , Ticket=>$Ticket,  Column=>$_ &>
	</TD>
%}
</TR>
%}
</TABLE>
%#<& QueueFooter format="$format" &>

<HR>

<& PickRestriction &>

<%INIT>

require RT::Interface::Web;

&ProcessSearchQuery(ARGS=>\%ARGS);

#$foo =$session{'tickets'}->Restrictions;

</%INIT>
