# BEGIN LICENSE BLOCK
# 
# Copyright (c) 1996-2002 Jesse Vincent <jesse@bestpractical.com>
# 
# (Except where explictly superceded by other copyright notices)
# 
# This work is made available to you under the terms of Version 2 of
# the GNU General Public License. A copy of that license should have
# been provided with this software, but in any event can be snarfed
# from www.gnu.org
# 
# This work is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.
# 
# 
# Unless otherwise specified, all modifications, corrections or
# extensions to this work which alter its source code become the
# property of Best Practical Solutions, LLC when submitted for
# inclusion in the work.
# 
#
# 
# END LICENSE BLOCK
WARNING
-------


This is a DEVELOPMENT RELEASE OF RT. PROCEED AT YOUR OWN RISK.



REQUIRED PACKAGES:
------------------

o   Perl5.6.1 or later with support for setgid perl scripts
        RT's command line and mail gateway tools run setgid to the 'rt' group
	to protect RT's database password.  You may need to install a special 
	"suidperl" package or reconfigure your perl setup to support
	 "setuid scripts".

o   A DB backend; MySQL is recommended ( http://www.mysql.com ) 
        Currently supported:    Mysql 4.0.3 or newer. 
				 (Some older releases had crippling SQL bugs)
				Postgres 7.2 or later

o   Apache (1.3.x or 2.x) with mod_perl -- ( http://perl.apache.org ) 
    or A webserver with FastCGI support (www.fastcgi.com)

	If you compile mod_perl on Apache 1.3.x as a DSO, you're on your own;
	It's known to have massive stability problems. 

        mod_perl 1.x must be build with EVERYTHING=1

o    Various and sundry perl modules
        RT takes care of the installation of most of these automatically
        during the "make testdeps" and "make fixdeps" stages below


GENERAL INSTALLATION
--------------------

1   Unpack this distribution SOMWHERE OTHER THAN where you want to install RT

        Granted, you've already got it open. To do this cleanly:

        	tar xzvf rt.tar.gz -C /tmp

2   Run the "configure" script. 

        ./configure --help to see the list of options
        ./configure (with the flags you want)

3   Satisfy RT's myriad dependencies. 

3.1   Check for compliance:
	make testdeps

3.2   If there are unsatisfied dependencies, install them by hand or run
	make fixdeps
	

3.3   Check to make sure everything was installed properly:
	make testdeps

4   Create a group called 'rt'

5a  FOR A NEW INSTALLATION: 
        
        As root, type:
		 make install	(replace "make" with the local name for 
				 Make, if you need to)

	If the make fails, type:
		make dropdb 
	and start over from step 5a

5b  FOR UPGRADING: (Within the RT 3.0.x series)

	Make a backup of /path/to/rt/etc/config.pm
 
        As root, type: 
		make upgrade     (replace "make" with the local name for 
				  Make, if you need to)

	This will build new binaries, config files and libraries without
	overwriting your RT database. 
        
        It will then instruct you to update your RT system database objects 
        by running rt/etc/insertdata <version> where <version> is the version 
        of RT you're upgrading from.

	WARNING: This WILL clobber your existing configuration file!
	
6   Edit etc/RT_Config.pm in your RT installation directory.  In many
    cases sensible defaults have been included. In others, you MUST
    supply a value.

7   Configure the email and web gateways, as described below. 

8   Stop and start your webserver, so it picks up your configuration changes.

    NOTE: root's password for the web interface is "password" 
    (without the quotes.)  Not changing this is a SECURITY risk
    
9   Configure RT per the instructions at http://www.fsck.com/rtfm/

    Until you do this, RT will not be able to send or recieve email,
    nor will it be more than marginally functional.  This is not an
    optional step.


SETTING UP THE MAIL GATEWAY 
---------------------------

An alias for the initial queue will need to be made in either your
global mail aliases file (if you are using NIS) or locally on your
machine.
 
Add the following lines to /etc/aliases (or your local equivalent) :

rt:         "|/path/to/rt3/bin/rt-mailgate --queue general --action correspond"
rt-comment: "|/path/to/rt3/bin/rt-mailgate --queue general --action comment"
                                                   |                |
                                   <queue-name>----/                |
                                                                    |
                      <correspond or comment depending on whether   |
                      the mail should be resent to the requestor>---/



THE WEB UI
----------

RT's web ui is based around HTML::Mason, which works best with the mod_perl
perl interpreter within Apache httpd.  Alternatively, support for the FastCGI
(and plain CGI) interface is also provided as 'bin/mason_handler.fcgi'.

Apache 
        RT Uses HTML::Mason.  You'll need to add a few lines to your
        httpd.conf telling it to use rt's web ui.  If you have mod-perl
	(you should, the perl scripts will go quite a bit faster around with
	it), you can do something like this:

<VirtualHost your.ip.address>
    ServerName your.rt.server.hostname
    DocumentRoot /path/to/rt3/share/html
    AddDefaultCharset UTF-8

    PerlFreshRestart On			# only for Apache/mod_perl 1.x
    PerlModule Apache2 Apache::compat	# only for Apache/mod_perl 2.x

    PerlModule Apache::DBI
    PerlRequire /path/to/rt3/bin/webmux.pl

    <FilesMatch "\.html$">
        SetHandler perl-script
        PerlHandler RT::Mason
    </FilesMatch>
    <LocationMatch "/Attachment/">
        SetHandler perl-script
        PerlHandler RT::Mason
    </LocationMatch>
</VirtualHost>

Additionally, if you are using a database engine other than MySQL, you should
set up a cron job to remove stale session locks.  (MySQL uses the database
itself for that.)

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 WARNING: Don't install this cron job or run this find command if your
 MASON_SESSION_PATH (known in config.pm as $MasonSessionDir) 
 points to a directory that could  EVER contain any file that's not 
 a Apache::Session datafile.
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

# Every hour, nuke session files and lockfiles that haven't been 
# touched in 10 hours

0 * * * * find /path/to/rt3/WebRT/sessiondata -type f -amin +600 -exec rm {} \;


THE CLI
-------
        Binaries for the CLI are located in rt3/bin
        You've got:

                "rtadmin" (modify queues, users and acls)

        This program takes --help as an option.


BUGS
----

Known issues with releases of RT2 are listed at 
<URL:http://fsck.com/rt2/NoAuth/Errata.html>.  This includes every bug known
to exist in each release of RT.  (When prompted, login as guest/guest)

To find out more about currently open bugs, check out the live 
Buglist at  <URL:http://fsck.com/rt2/NoAuth/Buglist.html>.
(When prompted, login as guest/guest)

To report a bug, send an email to rt-3.0-bugs@fsck.com.

GETTING HELP
------------

If RT is mission-critical for you or if you use it heavily, we recommend that
you purchase a commercial support contract.  Details on support contracts
are available at http://www.bestpractical.com.

If you're interested in having RT extended or customized or would like more
information about commercial support options, please send email to 
<sales@bestpractical.com> to discuss rates and availability.


RT-USERS MAILINGLIST
--------------------

To keep up to date on the latest RT tips, techniques and extections,
you probably want to join the rt-users mailinglist.  Send a message to:

         rt-users-request@lists.fsck.com 

With the body of the message consisting of only the word:

        subscribe

If you're interested in hacking on rt, you'll want to subscribe to
rt-devel@lists.fsck.com.  Subscribe to it with instructions similar to
those above.

Address questions about the stable release to the rt-users list, and
questions about the development version to the rt-devel list.  If you feel
your questions are best not asked publically, send them personally to
<jesse@bestpractical.com>.


RT WEBSITE
----------

For current information about RT, check out the RT website at 
http://www.bestpractical.com/  You'll find screenshots, a pointer
to the current version of rt, contributed patches and lots of other great
stuff.


TROUBLESHOOTING
---------------


If the solution to the problem you're running into isn't obvious and you've 
checked the FAQ, feel free to send mail to rt-users@fsck.com (for release 
versions of RT) or rt-devel@fsck.com (for development versions).

Thanks!

        Enjoy

        Jesse Vincent
	<jesse@bestpractical.com>
        Best Practical Solutions, LLC
